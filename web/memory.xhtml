<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="navigation">
                <h:form>
                    <ul>
                        <li><h:commandLink value="#{msg.restart}" action="#{lc.mc.init}"/></li>
                        <li><h:link outcome="index" value="#{msg.logout}(#{lc.name})"/></li>
                    </ul>
                </h:form>
            </ui:define>

            <ui:define name="content">

                <div id="info_area">
                    <h2>#{msg.gamestatus}</h2>
                    <table id="score" summary="Diese Tabelle zeigt den aktuellen Spielstand">
                        <tbody>
                            <tr>
                                <th class="accessibility">Label</th>
                                <th>#{msg.you}</th>
                                <th>#{msg.opponent}</th>
                            </tr>
                            <tr>
                                <th class="label">#{msg.pairs}</th>
                                <td><h:outputText id="foundpairs" value="#{lc.mc.currentPlayer.uncoveredMatchingPairsCount}"/></td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <th class="label">#{msg.attempts}</th>
                                <td><h:outputText id="attempts" value="#{lc.mc.currentPlayer.allUncoveredPairsCount}"/></td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <th class="label">#{msg.time}</th>
                                <td><h:outputText id="time" value="#{lc.mc.timeCurrentPlayer}"/></td>
                                <td>N/A</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2>#{msg.gameinfo}</h2>
                    <table id="game_info" summary="Diese Tabelle zeigt weitere Informationen zum aktuellen Spiel">
                        <tbody>
                            <tr class="accessibility">
                                <th>Information</th>
                                <th>Wert</th>
                            </tr>
                            <tr>
                                <th>#{msg.remainingpairs}</th>
                                <td><h:outputText id="coveredpairs" value="#{lc.mc.coveredPairsCount}"/></td>
                            </tr>
                            <tr>
                                <th xml:lang="en">#{msg.theme}</th>
                                <td>Alternative Rock</td>
                            </tr>
                        </tbody>
                    </table>
                    <ui:include src="/WEB-INF/includes/topartists.xhtml"/>
                </div>

                <hr class="accessibility" />
                <div id="board">
                    <h2 class="accessibility">Spielbrett</h2>
                    <h:form>
                        <table summary="Diese Tabelle stellt das Memory-Brett mit den Karten dar">
                            <tr class="accessibility">
                                <th>Kartenspalte 1</th>
                                <th>Kartenspalte 2</th>
                                <th>Kartenspalte 3</th>
                                <th>Kartenspalte 4</th>
                                <th>Kartenspalte 5</th>

                            </tr>
                            <f:ajax  render="@form :attempts :foundpairs :time :coveredpairs">
                                <ui:repeat value="#{lc.mc.cards}" var="row" >
                                    <tr>
                                        <th class="accessibility">Kartenzeile #{lc.mc.cards.indexOf(row)+1}</th>
                                        <ui:repeat value="#{row}" var="card" >
                                            <td class="#{card.currentState.toString().equals('UNCOVERED')?'visible_card':''}">
                                                <h:commandLink action="#{lc.mc.changeshow(card.row,card.column)}">
                                                    <h:graphicImage name="#{card.currentState.toString().equals('UNCOVERED')?card.id:lc.mc.backcardpath}" alt="card"/>
                                                </h:commandLink>
                                            </td>
                                        </ui:repeat>
                                    </tr>
                                </ui:repeat>
                            </f:ajax>
                        </table>
                    </h:form>
                </div>

            </ui:define>
        </ui:composition>
    </body>
</html>
